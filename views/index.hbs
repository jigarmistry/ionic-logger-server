<h1>Logs</h1><button id="clear">Clear</button>
<ul id="log"></ul>

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.3.3/backbone-min.js"></script>
<script src="http://warfares.github.io/pretty-json/pretty-json-min.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        var socket = io('http://localhost:4567');
        var id = 0;
        socket.on('message', function (data) {
            id += 1;
            let jsonId = "json" + id;
            $("#log").prepend('<li>' + new Date() + " " + data.message + '<p id="' + jsonId + '"></p></li>');

            if (data.data) {
                var obj = data.data;

                var node = new PrettyJSON.view.Node({
                    el: $('#' + jsonId),
                    data: obj
                });
            }

        });
        $("#clear").click(function () {
            $("#log").html('');
        });
    });

</script>